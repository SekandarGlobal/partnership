<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hire Form & Partnership</title>

<style>
* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:'Arial', sans-serif;
  background:#000;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  min-height:100vh;
  padding:20px;
}
.container {
  background:#111;
  padding:30px;
  border-radius:20px;
  width:100%;
  max-width:600px;
  box-shadow:0 10px 25px rgba(255,255,255,0.1);
}
h2 { font-size:1.8rem; margin-bottom:20px; text-align:center; }
p.description { color:#ccc; font-size:1rem; line-height:1.6; margin-bottom:20px; text-align:center; }
input, select, textarea {
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:12px;
  border:1px solid #fff;
  background:#000;
  color:#fff;
  font-size:0.95rem;
}
input::placeholder, textarea::placeholder, select { color:#ccc; }
textarea { resize:vertical; }
button {
  margin-top:20px;
  width:100%;
  padding:15px;
  border:none;
  border-radius:12px;
  background:#fff;
  color:#000;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  transition: all 0.2s ease;
}
button:hover{ background:#ccc; transform:scale(1.02);}
.checkbox-container { margin-top:15px; display:flex; align-items:center; }
.checkbox-container input { margin-right:10px; }
#thank-you { display:none; margin-top:20px; }
.submissions { margin-top:15px; border-top:1px solid #fff; padding-top:10px; }
.submissions p { font-size:0.9rem; color:#ccc; line-height:1.4; }
.other-input { display:none; margin-top:10px; }
</style>
</head>

<body>

<div class="container" id="form-container">
<h2>Apply / Become a Partner</h2>
<p class="description">
Fill this form to join us. You can work or become a partner.
</p>

<!-- Personal Info -->
<h3>Personal Info</h3>
<input type="text" id="name" placeholder="First Name" required>
<input type="text" id="lastname" placeholder="Last Name" required>
<input type="text" id="fathername" placeholder="Father Name">
<input type="text" id="country" placeholder="Country">
<input type="text" id="city" placeholder="City">
<input type="text" id="fulladdress" placeholder="Full Address">
<input type="email" id="email" placeholder="Email" required>
<input type="tel" id="phone" placeholder="Phone Number">
<input type="text" id="telegram" placeholder="Telegram Username">

<!-- Work Info -->
<h3>Work Info</h3>
<select id="work">
  <option value="">Select work you can do</option>
  <option value="manage finance">Manage Finance</option>
  <option value="manage backend">Manage Backend</option>
  <option value="manage telegram">Manage Telegram</option>
  <option value="help building app">Help in Building App</option>
  <option value="improving app">Improving App</option>
  <option value="other">Other</option>
</select>

<!-- Other custom input -->
<input type="text" id="workother" class="other-input" placeholder="Specify other work">

<!-- Partner Option -->
<h3>Become a Partner</h3>
<select id="partner">
  <option value="">Do you want to become a partner?</option>
  <option value="yes">Yes, I want to become a partner</option>
  <option value="no">No</option>
</select>

<!-- Terms -->
<div class="checkbox-container">
  <input type="checkbox" id="agree" required>
  <label for="agree">I agree with <a href="terms.html" target="_blank" style="color:#fff;text-decoration:underline;">Terms & Conditions</a> and <a href="privacy.html" target="_blank" style="color:#fff;text-decoration:underline;">Privacy Policy</a> and understand how my data will be used.</label>
</div>

<button id="submit">Submit</button>
</div>

<!-- Thank you page -->
<div class="container" id="thank-you">
<h2>Thank you for your submission! ðŸŽ‰</h2>
<p>Here are all the users who submitted:</p>
<div class="submissions" id="submissions"></div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCyvLrY_q11W2ZkTzSAgX016iP0uBEg4OU",
  authDomain: "shameer-f52f7.firebaseapp.com",
  projectId: "shameer-f52f7",
  storageBucket: "shameer-f52f7.firebasestorage.app",
  messagingSenderId: "730512262010",
  appId: "1:730512262010:web:635a7ada85d715ddb1ccc3",
  measurementId: "G-7LTSB7W4J9"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Show/hide other work input
const workSelect = document.getElementById("work");
const otherInput = document.getElementById("workother");
workSelect.addEventListener("change", ()=>{
  if(workSelect.value==="other") otherInput.style.display="block";
  else otherInput.style.display="none";
});

// Submit
document.getElementById("submit").onclick = async ()=>{
  // Validation
  const name = document.getElementById("name").value.trim();
  const lastname = document.getElementById("lastname").value.trim();
  const fathername = document.getElementById("fathername").value.trim();
  const country = document.getElementById("country").value.trim();
  const city = document.getElementById("city").value.trim();
  const fulladdress = document.getElementById("fulladdress").value.trim();
  const email = document.getElementById("email").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const telegram = document.getElementById("telegram").value.trim();
  let work = workSelect.value;
  if(work==="other") work = otherInput.value.trim();
  const partner = document.getElementById("partner").value;
  const agree = document.getElementById("agree").checked;

  if(!name || !lastname || !email || !agree){
    alert("Please fill required fields and agree to the terms.");
    return;
  }

  try{
    await addDoc(collection(db,"hires"),{
      name, lastname, fathername, country, city, fulladdress, email, phone, telegram, work, partner, timestamp:Date.now()
    });

    // Show thank you page
    document.getElementById("form-container").style.display="none";
    document.getElementById("thank-you").style.display="block";

    // Fetch all submissions
    const submissionsDiv = document.getElementById("submissions");
    submissionsDiv.innerHTML = "";
    const querySnapshot = await getDocs(collection(db,"hires"));
    querySnapshot.forEach(doc=>{
      const data = doc.data();
      submissionsDiv.innerHTML += `<p><strong>${data.name} ${data.lastname}</strong> - ${data.work} - Partner: ${data.partner}</p>`;
    });
  } catch(e){ alert("Submission failed."); console.error(e);}
};
</script>

</body>
</html>
