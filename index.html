<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Partnership Invitation</title>

<style>
* { box-sizing: border-box; margin:0; padding:0; }
body {
  font-family: 'Arial', sans-serif;
  background: #000;
  color: #fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}
.container {
  background:#111;
  padding:30px 25px;
  border-radius:20px;
  max-width:500px;
  width:90%;
  text-align:center;
  box-shadow:0 10px 25px rgba(255,255,255,0.1);
  transition: transform 0.3s ease, opacity 0.3s ease;
}
h2 { font-size:1.8rem; margin-bottom:15px; font-weight:bold; }
p.description { font-size:1rem; line-height:1.6; margin-bottom:25px; color:#ddd; }

input, textarea {
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:12px;
  border:1px solid #fff;
  background:#000;
  color:#fff;
  font-size:0.95rem;
  transition: all 0.2s ease;
}
input::placeholder, textarea::placeholder { color:#ccc; }

.option {
  border:2px solid #fff;
  border-radius:12px;
  padding:15px;
  margin:12px 0;
  cursor:pointer;
  font-weight:bold;
  transition: all 0.2s ease;
}
.option:hover { transform:scale(1.03); background:#fff; color:#000; }
.option.selected { background:#fff; color:#000; }

.reason-container { margin-top:15px; text-align:left; display:none; }
.suggestions { margin-top:8px; display:flex; flex-wrap:wrap; gap:8px; }
.suggestion { background:#fff; color:#000; padding:6px 10px; border-radius:12px; font-size:0.85rem; cursor:pointer; transition: all 0.2s ease; }
.suggestion:hover { transform:scale(1.05); background:#ccc; }

button { margin-top:25px; width:100%; padding:15px; border:none; border-radius:12px; background:#fff; color:#000; font-size:16px; font-weight:bold; cursor:pointer; transition: all 0.2s ease; }
button:hover:not(.disabled) { transform:scale(1.02); background:#ccc; }
button.disabled { opacity:0.5; pointer-events:none; }

.thank-you-container {
  display:none;
  width:90%;
  max-width:500px;
  text-align:center;
  animation: fadeIn 0.5s forwards;
}
.thank-you-container h2 { color:#fff; font-size:1.8rem; margin-bottom:15px; }
#dynamic-content { margin-top:20px; font-size:1rem; color:#fff; line-height:1.5; text-align:left; }

@keyframes fadeIn { 0%{opacity:0} 100%{opacity:1} }
@media (max-width:400px) { h2{ font-size:1.5rem;} p.description{ font-size:0.95rem; } }
</style>
</head>

<body>

<div class="container" id="form-container">
<h2>Partnership Invitation</h2>
<p class="description">
Hello! Iâ€™m Sekandar. Iâ€™ve built an online store and some apps on the Play Store.  
I want to invite you to partner with me. You donâ€™t need to invest any money, just support me as a partner.  
We will share the profits from the projects as we grow the users and apps.  
Please let me know if you want to join.
</p>

<!-- Name Input -->
<input type="text" id="user-name" placeholder="Enter your name" />

<div id="yes" class="option">YES, I want to join</div>
<div id="no" class="option">NO, I am not interested</div>

<div class="reason-container" id="reason-container">
  <p>Select a reason or write your own:</p>
  <div class="suggestions">
    <div class="suggestion">Not interested right now</div>
    <div class="suggestion">Too busy to join</div>
    <div class="suggestion">Need more information</div>
    <div class="suggestion">Prefer other opportunities</div>
  </div>
  <textarea id="reason" placeholder="Or write your own reason..."></textarea>
</div>

<button id="submit">Submit</button>
</div>

<div class="thank-you-container" id="thank-you">
<h2>Thank you for your response! ðŸŽ‰</h2>
<div id="dynamic-content">Loading content...</div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
import { getFirestore, collection, addDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCyvLrY_q11W2ZkTzSAgX016iP0uBEg4OU",
  authDomain: "shameer-f52f7.firebaseapp.com",
  projectId: "shameer-f52f7",
  storageBucket: "shameer-f52f7.firebasestorage.app",
  messagingSenderId: "730512262010",
  appId: "1:730512262010:web:635a7ada85d715ddb1ccc3",
  measurementId: "G-7LTSB7W4J9"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getFirestore(app);

let selected = null;
let reasonChosen = null;

if(localStorage.getItem("submitted")){
  reasonChosen = localStorage.getItem("reasonChosen");
  showThankYou(reasonChosen);
}

document.getElementById("yes").onclick = () => select("YES");
document.getElementById("no").onclick = () => select("NO");

function select(val){
  selected = val;
  document.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
  document.getElementById(val.toLowerCase()).classList.add("selected");
  if(val==="NO"){
    document.getElementById("reason-container").style.display="block";
  } else {
    document.getElementById("reason-container").style.display="none";
    document.getElementById("reason").value="";
    reasonChosen=null;
  }
}

document.querySelectorAll(".suggestion").forEach(el=>{
  el.onclick = () => {
    document.getElementById("reason").value = el.innerText;
    reasonChosen = el.innerText;
  };
});

document.getElementById("submit").onclick = async ()=>{
  if(localStorage.getItem("submitted")) return;

  const userName = document.getElementById("user-name").value.trim();
  if(!userName){ alert("Please enter your name."); return; }

  if(!selected){ alert("Select Yes or No"); return; }

  let reasonText = document.getElementById("reason").value.trim();
  if(selected==="NO"){
    if(!reasonText){ alert("Please enter a reason or select one."); return; }
    reasonChosen = reasonText;
  }

  try{
    await addDoc(collection(db,"responses"),{
      name: userName,
      answer: selected,
      reason: reasonChosen||"",
      timestamp: Date.now(),
      device: navigator.userAgent
    });

    localStorage.setItem("submitted","true");
    if(reasonChosen) localStorage.setItem("reasonChosen",reasonChosen);

    showThankYou(reasonChosen);
  }catch(e){ alert("Submit failed."); console.error(e);}
};

async function showThankYou(reason){
  document.getElementById("form-container").style.display="none";
  const thankYou = document.getElementById("thank-you");
  thankYou.style.display="block";

  const dynamicContent = document.getElementById("dynamic-content");

  if(!reason){ dynamicContent.innerText=""; return; }

  if(reason.toLowerCase().includes("need more information")){
    try{
      const docRef = doc(db,"info","latest");
      const docSnap = await getDoc(docRef);
      dynamicContent.innerText = docSnap.exists()? docSnap.data().content : "You will receive more information on this page. Stay tuned!";
    }catch(err){ dynamicContent.innerText="You will receive more information on this page. Stay tuned!";}
  } else if(reason.toLowerCase().includes("other opportunities")){
    try{
      const docRef = doc(db,"opportunities","latest");
      const docSnap = await getDoc(docRef);
      dynamicContent.innerText = docSnap.exists()? docSnap.data().content : "You will see other opportunities on this page.";
    }catch(err){ dynamicContent.innerText="You will see other opportunities on this page.";}
  } else {
    dynamicContent.innerText="Thank you for your response!";
  }
}
</script>
</body>
</html>
